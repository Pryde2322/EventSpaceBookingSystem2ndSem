<?xml version="1.0" encoding="utf-8" ?>
<mopups:PopupPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                  xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                  x:Class="EventSpaceBookingSystem.View.NotifBox"
                  xmlns:mopups="clr-namespace:Mopups.Pages;assembly=Mopups"
                  Title="NotifBox"
                  CloseWhenBackgroundIsClicked="True">

    <!-- Outer Layout for Popup Placement -->
    <HorizontalStackLayout HorizontalOptions="End" VerticalOptions="Start" Margin="0,75,65,0">
        <Border BackgroundColor="White" Padding="10" WidthRequest="300" Stroke="White">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="10" />
            </Border.StrokeShape>

            <VerticalStackLayout Spacing="10">
                <Label Text="Notifications" FontSize="20" FontAttributes="Bold" HorizontalOptions="Center"/>

                <!-- Show this when list is empty -->
                <Label Text="No Notifications"
                       FontSize="14"
                       TextColor="Gray"
                       HorizontalOptions="Center"
                       IsVisible="{Binding Notifications.Count, Converter={StaticResource ZeroToBoolConverter}}"/>

                <!-- Scrollable Notifications List -->
                <ScrollView HeightRequest="120">
                    <CollectionView ItemsSource="{Binding Notifications}"
                                    IsVisible="{Binding Notifications.Count, Converter={StaticResource GreaterThanZeroConverter}}"
                                    Margin="0">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame BackgroundColor="#F3F3F3" Padding="10" Margin="0,5" CornerRadius="10">
                                    <VerticalStackLayout>
                                        <Label Text="{Binding Title}" FontAttributes="Bold" FontSize="14"/>
                                        <Label Text="{Binding Message}" FontSize="12"/>
                                        <Label Text="{Binding Timestamp}" FontSize="10" TextColor="Gray" HorizontalOptions="End"/>
                                    </VerticalStackLayout>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </ScrollView>
            </VerticalStackLayout>
        </Border>
    </HorizontalStackLayout>
</mopups:PopupPage>
